
<table class="table table-condensed guest-list-table">
	<tr>
		<th><%= link_to "Name", :sort=>'name' %></th>
      	<th><%= link_to "Gender", :sort=>'gender' %></th>
      	<th><%= link_to "Side", :sort=>'side' %></th>
      	<th><%= link_to "Adults", :sort=>'adults' %></th>
      	<th><%= link_to "Children", :sort=>'children' %></th>
      	<th><%= link_to "Group", :sort=>'"group"' %></th>
      	<th><%= link_to "Table", :sort=>'table_no' %></th>
      	<th>Note</th>
      	<th><%= link_to "Attending", :sort=>'attending' %></th>
      	<th><%= link_to "Invitation", :sort=>'invitation_sent' %></th>
      	<th><%= link_to "via", :sort=>'invitation_sent' %></th>
      	<th>Phone</th>
      	<th>Address</th>
      	<th>Action</th>
	</tr>

	<tr>
		<%= form_for [@event, @new], html:{class: "form-all"} do |f| %>
		<div class="field">
		<td>
			<span class="pull-left thirty-percent">
				<%= f.select :prefix, [['Mr.', 'Mr.'], ['Mrs.', 'Mrs.'], ['Miss.', 'Miss.'], ['Dr.', 'Dr.'], ['Prof.', 'Prof.']] %>
			</span>
			<span class="pull-right seventy-percent">
        		<%= f.text_field :name %>	
			</span>
		</td>
		<td><%= f.select :gender,[['M -  male', 'male'],['F - female', 'female']], :class=>"number-field" %></td>
		<td><%= f.select :side, [[@event.bride_name, @event.bride_name], [@event.groom_name, @event.groom_name]] %></td>
		<td><%= f.number_field :adults, value: 1, :class=>"number-field"  %></td>
		<td><%= f.number_field :children, value: 0, :class=>"number-field" %></td>
		<td><%= f.text_field :group %></td>
		<td><%= f.text_field :table_no, value: 0, :class=>"number-field" %></td>
		<td><%= f.text_field :note %></td>
		<td><%= f.select :attending,[['Confirmed', true],['Not Confirmed', false]] %></td>
		<td><%= f.select :invitation_sent,[['Sent', true],['Not Sent', false]] %></td>
		<td><%= f.select :invited_via,[['postal', 'postal'],['email', 'email'], ['link', 'link']] %></td>
		<td><%= f.phone_field :phone %></td>
		<td><%= f.text_field :address  %></td>
		<td><%= f.submit "Submit", class: "btn all-btn btn-large" %></td>
		</div>
		<% end %>
	</tr>
	<% guests.each do |g| %>
		<tr class="<%= 'warning' if g.invitation_sent==false %>">
			<td style="padding-left:10px;">
				<%= g.name %>
			</td>
			<td><%= g.gender.chars.first.capitalize %></td>
			<td><%= g.side %></td>
			<td><%= g.adults %></td>
			<td><%= g.children %></td>
			<td><%= g.group %></td>
			<td><% if g.table_no==0 %>
						#
					<%else %>
						<%= g.table_no %>
					<%end%></td>
			<td><%= g.note %></td>
			<td>
					<% if g.attending==true %>
						Yes <%= link_to "/no?", event_guest_attending_path(:guest_id=>g.id, :attending=>false), method: :put	 %>
					<%else %>
						No <%= link_to "/yes?", event_guest_attending_path(:guest_id=>g.id, :attending=> true), method: :put	%>
					<%end%>
				
			</td>
			<td>
					<% if g.invitation_sent==true %>
						Sent <%= link_to "no?", event_guest_invitation_sent_path(:guest_id=>g.id, :invitation_sent=>false), method: :put %>
					<%else %>
						Not sent <%= link_to "no?", event_guest_invitation_sent_path(:guest_id=>g.id, :invitation_sent=>true), method: :put %>
					<%end%>
				
			</td>
			<td><%= g.invited_via %></td>
			<td><%= g.phone %></td>
			<td><%= g.address %></td>

			<td>
				<%= link_to "edit", edit_event_guest_path(@event, g.id) %> | 
    			<%= link_to "delete", event_guest_path(@event, g.id), method: :delete,
                                     data: { confirm: "You sure?" },
                                     title: g.name %>
                 <a class='invite-link-btn' data-clipboard-target='invite-link-<%= g.id %>' data-clipboard-text='lala' id='invite-link-btn-<%= g.id %>' title='Click me to copy to clipboard.'>
				   link
				  </a>
                <span id="invite-link-<%= g.id %>" class="hidden"><%= root_url + "events/" + @event.id.to_s + "/guests/" + g.id.to_s + "/invitation_form" %></span>
			</td>
		</tr>
	<% end %>
</table>